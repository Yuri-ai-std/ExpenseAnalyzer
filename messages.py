# messages.py

from typing import Optional

messages = {
    "en": {
        "add_expense.choose_existing": "Choose a category",
        "add_expense.mode.existing": "Choose existing",
        "add_expense.mode.new": "Enter new",
        "add_expense.new_category": "New category",
        "autofill_info": "Auto-filled this month's limits from history.",
        "browse.export_data": "Export Data",
        "browse.max_amount": "Max amount",
        "browse.min_amount": "Min amount",
        "browse.placeholder": "Browse & Filter page (placeholder)",
        "browse.remove_dups_help": "Remove rows that are exact duplicates (date, category, amount, "
        "description).",
        "browse.reset": "Reset",
        "browse.search_contains": "Search (description contains)",
        "browse.view_options": "View options",
        "browse.results": "Filtered results",
        "budget_exceeded": "⚠️ Over budget for {category}!",
        "budget_header": "=== Budget Check ===",
        "budget_limit_updated": "Budget limit updated successfully!",
        "budget_ok": "Within budget for {category}.",
        "buttons": {"save_to_file": "Save to file"},
        "buttons.browse_files": "Browse files",
        "buttons.save": "Save",
        "buttons.create": "Create",
        "caption_no_suggestions_yet": "No suggestions yet.",
        "categories.entertainment": "entertainment",
        "categories.food": "food",
        "categories.groceries": "groceries",
        "categories.other": "other",
        "categories.transport": "transport",
        "categories.utilities": "utilities",
        "change_log": "Change log (session)",
        "charts.placeholder": "Charts page (placeholder)",
        "charts.share_by_category_pie": "Share by category (pie)",
        "charts.show_data": "Show data",
        "charts.by_date": "By date",
        "charts.show_data": "Show data",
        "charts.enable_zoom": "Enable zoom",
        "charts.enable_zoom_help": "Scroll to zoom, drag to pan",
        "charts.enable_logy": "logarithmic Y scale",
        "charts.enable_logy_help": "Affects the 'BY date' chart only",
        "clear_audit": "Clear audit",
        "cleared": "Cleared!",
        "col.amount": "Amount",
        "col.category": "Category",
        "col.date": "Date",
        "col.id": "Id",
        "common": {
            "enter_category": "Enter category: ",
            "enter_date": "Enter date (YYYY-MM-DD): ",
            "enter_option": "Enter option: ",
            "saved": "Saved!",
            "saving_data": "Saving data...",
            "suggestions": "Suggestions (last 3 months)",
        },
        "common.apply": "Apply",
        "common.description": "Description",
        "common.end": "End",
        "common.start": "Start",
        "common.submit": "Submit",
        "common.user": "User",
        "csv_import_failed": "CSV import failed",
        "dashboard": {
            "recent_expenses": "Recent expenses",
            "summary_header": "=== Expense Summary ===",
            "summary_line": "Category: {category}, Total: {total}",
            "total_expenses": "Total expenses: {total}",
        },
        "dashboard.by_category": "By category",
        "dashboard.last_operations": "Last operations",
        "dashboard.placeholder": "Dashboard page (placeholder)",
        "download_csv": "Download CSV",
        "download_json": "Download JSON",
        "edit_limits": "Edit Monthly Limits",
        "enter_amount": "Enter amount: ",
        "enter_category": "Enter category: ",
        "enter_date": "Enter date (YYYY-MM-DD): ",
        "enter_description": "Enter description (optional): ",
        "enter_month": "Enter month (YYYY-MM): ",
        "enter_option": "Enter option: ",
        "errors": {
            "invalid_date": "Invalid date! Use YYYY-MM-DD.",
            "warning_enter_name": "Please enter a name.",
            "warning_enter_new_name": "Please enter a new name.",
            "warning_user_name_exists": "User with this name already exists.",
        },
        "expense_added": "Expense added successfully!",
        "expense_summary": "Expense summary:",
        "filter_end_date": "Enter end date (YYYY-MM-DD): ",
        "filter_prompt": "Enter start and end date (YYYY-MM-DD to YYYY-MM-DD): ",
        "filter_results_header": "=== Filtered Expenses ===",
        "filter_start_date": "Enter start date (YYYY-MM-DD): ",
        "goodbye": "Goodbye!",
        "import_export": "Import / Export",
        "import_success": "Limits imported from CSV",
        "info_no_data_to_export": "No data to export.",
        "invalid_amount": "Invalid amount! Please enter a number.",
        "invalid_category": "Invalid category! Please try again.",
        "invalid_date": "Invalid date! Use YYYY-MM-DD.",
        "invalid_option": "Invalid option! Please enter a number from 1 to 8.",
        "kpi.average": "Average",
        "kpi.categories": "Categories",
        "kpi.operations": "Operations",
        "kpi.total": "Total",
        "limit_line": "Category: {category}, Limit: {limit}",
        "limits": {
            "set_limit_amount": "Enter monthly limit for this category: ",
            "set_limit_category": "Enter category to set/update limit: ",
        },
        "limits.clear_month": "Clear month limits",
        "limits.import_csv": "Import limits (CSV)",
        "limits.month": "Month",
        "limits.monthly_title": "Monthly limits",
        "limits.title": "Budget Limits",
        "limits_header": "=== Budget Limits ===",
        "menu": {
            "header": "=== Expense Analyzer Menu ===",
            "options": "1: Add expense\n"
            "2: Show summary\n"
            "3: Filter expenses by date\n"
            "4: Check budget limits\n"
            "5: Set or update budget limits\n"
            "6: View all expenses\n"
            "7: Save & Exit\n"
            "8: Generate charts\n"
            "L: Change language\n",
        },
        "menu.add_expense": "Add Expense",
        "menu.browse": "Browse & Filter",
        "menu.charts": "Charts",
        "menu.dashboard": "Dashboard",
        "menu.settings": "Settings",
        "menu.title": "Menu",
        "menu_header": "=== Expense Analyzer Menu ===",
        "menu_options": "1: Add expense\n"
        "2: Show summary\n"
        "3: Filter expenses by date\n"
        "4: Check budget limits\n"
        "5: Set or update budget limits\n"
        "6: View all expenses\n"
        "7: Save & Exit\n"
        "8: Generate charts\n"
        "L: Change language\n",
        "no_expenses": "No expenses recorded.",
        "no_limits_set": "No budget limits have been set.",
        "no_results": "No expenses found for this period.",
        "note": "Note: {note}",
        "profile.title": "User / Profile",
        "profile": {
            "active_user": "Active user",
            "create_rename_user": "Create / rename user",
            "type_name": "Type name",
            "archive_before_delete": "Archive before delete",
            "delete_user": "Delete user",
            "rename": "Rename",
            "cannot_delete_last": "You cannot delete the last remaining user.",
            "deletion_failed": "Deletion failed.",
            "rename_failed": "Rename failed.",
            "toast_created_switched": "Created & switched",
            "toast_deleted_switched": "Deleted, switched",
            "toast_renamed_switched": "Renamed & switched",
            "toast_switched": "Switched",
        },
        "language_switched": "Language switched",
        "prompt_budget_limit_for_category": "Enter budget limit for category:",
        "profile.active_user": "Active user",
        "profile.create_rename_user": "Create / rename user",
        "profile.type_name": "Type name",
        "profile.archive_before_delete": "Archive before delete",
        "profile.delete_user": "Delete user",
        "profile.rename": "Rename",
        "profile.cannot_delete_last": "You cannot delete the last remaining user.",
        "profile.deletion_failed": "Deletion failed.",
        "profile.rename_failed": "Rename failed.",
        "profile.toast_created_switched": "Created & switched",
        "profile.toast_deleted_switched": "Deleted, switched",
        "profile.toast_renamed_switched": "Renamed & switched",
        "profile.toast_switched": "Switched",
        "recent_expenses": "Recent expenses",
        "save_to_file": "Save to file",
        "saved": "Saved!",
        "saving_data": "Saving data...",
        "set_limit_amount": "Enter monthly limit for this category: ",
        "set_limit_category": "Enter category to set/update limit: ",
        "settings.language": "Language",
        "suggestions": "Suggestions (last 3 months)",
        "summary_header": "=== Expense Summary ===",
        "summary_line": "Category: {category}, Total: {total}",
        "total_expenses": "Total expenses: {total}",
        "view_options.newest_first": "Newest first",
        "view_options.remove_dups": "Remove exact duplicates",
        "warning_enter_name": "Please enter a name.",
        "warning_enter_new_name": "Please enter a new name.",
        "warning_user_name_exists": "User with this name already exists.",
    },
    "es": {
        "add_expense.choose_existing": "Elige una categoría",
        "add_expense.mode.existing": "Elegir existente",
        "add_expense.mode.new": "Ingresar nueva",
        "add_expense.new_category": "Nueva categoría",
        "autofill_info": "Límites de este mes auto-rellenados desde el historial.",
        "browse.export_data": "Exportar datos",
        "browse.max_amount": "Monto máximo",
        "browse.min_amount": "Monto mínimo",
        "browse.placeholder": "Página Buscar y Filtrar (placeholder)",
        "browse.remove_dups_help": "Elimina filas exactamente iguales (fecha, categoría, importe, "
        "descripción).",
        "browse.reset": "Restablecer",
        "browse.search_contains": "Buscar (la descripción contiene)",
        "browse.view_options": "Opciones de vista",
        "browse.results": "Resultados filtrados",
        "budget_exceeded": "⚠️ ¡Presupuesto excedido para {category}!",
        "budget_header": "=== Revisión del Presupuesto ===",
        "budget_limit_updated": "¡Límite de presupuesto actualizado con éxito!",
        "budget_ok": "Dentro del presupuesto para {category}.",
        "buttons": {"save_to_file": "Guardar en archivo"},
        "buttons.browse_files": "Buscar archivos",
        "buttons.save": "Guardar",
        "buttons.create": "Crear",
        "caption_no_suggestions_yet": "Aún no hay sugerencias.",
        "categories.entertainment": "entretenimiento",
        "categories.food": "comida",
        "categories.groceries": "supermercado",
        "categories.other": "otro",
        "categories.transport": "transporte",
        "categories.utilities": "servicios",
        "change_log": "Registro de cambios (sesión)",
        "charts.placeholder": "Página de gráficos (marcador de posición)",
        "charts.share_by_category_pie": "Participación por categoría (tarta)",
        "charts.show_data": "Mostrar datos",
        "charts.by_date": "Por fecha",
        "charts.show_data": "Mostrar datos",
        "charts.enable_zoom": "Habilitar zoom",
        "charts.enable_zoom_help": "Desplaza para acercar, arrastra para mover",
        "charts.enable_logy": "Escala Y logarítmica",
        "charts.enable_logy_help": "Afecta solo al gráfico 'POR fecha'",
        "clear_audit": "Borrar auditoría",
        "cleared": "¡Limpiado!",
        "col.amount": "Importe",
        "col.category": "Categoría",
        "col.date": "Fecha",
        "col.id": "Id",
        "common": {
            "enter_category": "Ingrese la categoría: ",
            "enter_date": "Ingrese la fecha (AAAA-MM-DD): ",
            "enter_option": "Elija una opción: ",
            "saved": "¡Guardado!",
            "saving_data": "Guardando datos...",
            "suggestions": "Sugerencias (últimos 3 meses)",
        },
        "common.apply": "Aplicar",
        "common.description": "Descripción",
        "common.end": "Fin",
        "common.start": "Inicio",
        "common.submit": "Enviar",
        "common.user": "Usuario",
        "csv_import_failed": "Error al importar CSV",
        "dashboard": {
            "recent_expenses": "Gastos recientes",
            "summary_header": "=== Resumen de Gastos ===",
            "summary_line": "Categoría: {category}, Total: {total}",
            "total_expenses": "Gastos totales: {total}",
        },
        "dashboard.by_category": "Por categoría",
        "dashboard.last_operations": "Últimas operaciones",
        "dashboard.placeholder": "Página del panel (marcador de posición)",
        "download_csv": "Descargar CSV",
        "download_json": "Descargar JSON",
        "edit_limits": "Editar límites mensuales",
        "enter_amount": "Ingrese el monto: ",
        "enter_category": "Ingrese la categoría: ",
        "enter_date": "Ingrese la fecha (AAAA-MM-DD): ",
        "enter_description": "Ingrese una descripción (opcional): ",
        "enter_month": "Ingrese el mes (AAAA-MM): ",
        "enter_option": "Elija una opción: ",
        "errors": {
            "invalid_date": "¡Fecha inválida! Use AAAA-MM-DD.",
            "warning_enter_name": "Por favor, ingrese un nombre.",
            "warning_enter_new_name": "Por favor, ingrese un nuevo nombre.",
            "warning_user_name_exists": "Ya existe un usuario con este nombre.",
        },
        "expense_added": "¡Gasto agregado con éxito!",
        "expense_summary": "Resumen de gastos:",
        "filter_end_date": "Ingrese la fecha de fin (AAAA-MM-DD): ",
        "filter_prompt": "Ingrese la fecha de inicio y de fin (AAAA-MM-DD a AAAA-MM-DD): ",
        "filter_results_header": "=== Gastos Filtrados ===",
        "filter_start_date": "Ingrese la fecha de inicio (AAAA-MM-DD): ",
        "goodbye": "¡Adiós!",
        "import_export": "Importar / Exportar",
        "import_success": "Límites importados desde CSV",
        "info_no_data_to_export": "No hay datos para exportar.",
        "invalid_amount": "¡Monto inválido! Por favor, ingrese un número.",
        "invalid_category": "¡Categoría inválida! Intente de nuevo.",
        "invalid_date": "¡Fecha inválida! Use AAAA-MM-DD.",
        "invalid_option": "¡Opción inválida! Por favor, ingrese un número del 1 al 8.",
        "kpi.average": "Promedio",
        "kpi.categories": "Categorías",
        "kpi.operations": "Operaciones",
        "kpi.total": "Total",
        "limit_line": "Categoría: {category}, Límite: {limit}",
        "limits": {
            "set_limit_amount": "Ingrese el límite mensual para esta categoría: ",
            "set_limit_category": "Ingrese la categoría para establecer/actualizar el "
            "límite: ",
        },
        "limits.clear_month": "Limpiar límites del mes",
        "limits.import_csv": "Importar límites (CSV)",
        "limits.month": "Mes",
        "limits.monthly_title": "Límites mensuales",
        "limits.title": "Límites de presupuesto",
        "limits_header": "=== Límites de Presupuesto ===",
        "menu": {
            "header": "=== Menú del Analizador de Gastos ===",
            "options": "1: Añadir gasto\n"
            "2: Ver resumen\n"
            "3: Filtrar gastos por fecha\n"
            "4: Revisar límites de presupuesto\n"
            "5: Establecer o actualizar límites de presupuesto\n"
            "6: Ver todos los gastos\n"
            "7: Guardar y Salir\n"
            "8: Generar gráficos\n"
            "L: Cambiar idioma\n",
        },
        "menu.add_expense": "Añadir gasto",
        "menu.browse": "Buscar & Filtrar",
        "menu.charts": "Gráficos",
        "menu.dashboard": "Panel",
        "menu.settings": "Ajustes",
        "menu.title": "Menú",
        "menu_header": "=== Menú del Analizador de Gastos ===",
        "menu_options": "1: Añadir gasto\n"
        "2: Ver resumen\n"
        "3: Filtrar gastos por fecha\n"
        "4: Revisar límites de presupuesto\n"
        "5: Establecer o actualizar límites de presupuesto\n"
        "6: Ver todos los gastos\n"
        "7: Guardar y Salir\n"
        "8: Generar gráficos\n"
        "L: Cambiar idioma\n",
        "no_expenses": "No se registraron gastos.",
        "no_limits_set": "No se han establecido límites de presupuesto.",
        "no_results": "No se encontraron gastos para este período.",
        "note": "Nota: {note}",
        "profile.title": "Usuario / Perfil",
        "profile": {
            "active_user": "Usuario activo",
            "create_rename_user": "Crear / renombrar usuario",
            "type_name": "Escribir nombre",
            "archive_before_delete": "Archivar antes de eliminar",
            "delete_user": "Eliminar usuario",
            "rename": "Renombrar",
            "cannot_delete_last": "No puede eliminar el último usuario restante.",
            "deletion_failed": "Error en la eliminación.",
            "rename_failed": "Error al renombrar.",
            "toast_created_switched": "Creado y cambiado",
            "toast_deleted_switched": "Eliminado, cambiado",
            "toast_renamed_switched": "Renombrado y cambiado",
            "toast_switched": "Cambiado",
        },
        "language_switched": "Idioma cambiado",
        "prompt_budget_limit_for_category": "Ingrese el límite de presupuesto para la categoría:",
        "profile.active_user": "Usuario activo",
        "profile.create_rename_user": "Crear / renombrar usuario",
        "profile.type_name": "Escribir nombre",
        "profile.archive_before_delete": "Archivar antes de eliminar",
        "profile.delete_user": "Eliminar usuario",
        "profile.rename": "Renombrar",
        "profile.cannot_delete_last": "No puede eliminar el último usuario restante.",
        "profile.deletion_failed": "Error en la eliminación.",
        "profile.rename_failed": "Error al renombrar.",
        "profile.toast_created_switched": "Creado y cambiado",
        "profile.toast_deleted_switched": "Eliminado, cambiado",
        "profile.toast_renamed_switched": "Renombrado y cambiado",
        "profile.toast_switched": "Cambiado",
        "recent_expenses": "Gastos recientes",
        "save_to_file": "Guardar en archivo",
        "saved": "¡Guardado!",
        "saving_data": "Guardando datos...",
        "set_limit_amount": "Ingrese el límite mensual para esta categoría: ",
        "set_limit_category": "Ingrese la categoría para establecer/actualizar el límite: ",
        "settings.language": "Idioma",
        "suggestions": "Sugerencias (últimos 3 meses)",
        "summary_header": "=== Resumen de Gastos ===",
        "summary_line": "Categoría: {category}, Total: {total}",
        "total_expenses": "Gastos totales: {total}",
        "view_options.newest_first": "Más recientes primero",
        "view_options.remove_dups": "Eliminar duplicados exactos",
        "warning_enter_name": "Por favor, ingrese un nombre.",
        "warning_enter_new_name": "Por favor, ingrese un nuevo nombre.",
        "warning_user_name_exists": "Ya existe un usuario con este nombre.",
    },
    "fr": {
        "add_expense.choose_existing": "Choisissez une catégorie",
        "add_expense.mode.existing": "Choisir existante",
        "add_expense.mode.new": "Saisir nouvelle",
        "add_expense.new_category": "Nouvelle catégorie",
        "autofill_info": "Plafonds de ce mois auto-remplis à partir de l'historique.",
        "browse.export_data": "Exporter les données",
        "browse.max_amount": "Montant max",
        "browse.min_amount": "Montant min",
        "browse.placeholder": "Page Parcourir & Filtrer (placeholder)",
        "browse.remove_dups_help": "Supprime les lignes strictement identiques (date, catégorie, "
        "montant, description).",
        "browse.reset": "Réinitialiser",
        "browse.search_contains": "Rechercher (la description contient)",
        "browse.view_options": "Options d’affichage",
        "browse.results": "Résultats filtrés",
        "budget_exceeded": "⚠️ Dépassement du budget pour {category} !",
        "budget_header": "=== Vérification du Budget ===",
        "budget_limit_updated": "Limite budgétaire mise à jour avec succès !",
        "budget_ok": "Dans le budget pour {category}.",
        "buttons": {"save_to_file": "Enregistrer dans un fichier"},
        "buttons.browse_files": "Parcourir les fichiers",
        "buttons.save": "Enregistrer",
        "buttons.create": "Créer",
        "caption_no_suggestions_yet": "Pas encore de suggestions.",
        "categories.entertainment": "divertissement",
        "categories.food": "nourriture",
        "categories.groceries": "épicerie",
        "categories.other": "autre",
        "categories.transport": "transport",
        "categories.utilities": "services publics",
        "change_log": "Journal des modifications (session)",
        "charts.placeholder": "Page des graphiques (placeholder)",
        "charts.share_by_category_pie": "Part par catégorie (camembert)",
        "charts.show_data": "Afficher les données",
        "charts.by_date": "Par date",
        "charts.show_data": "Afficher les données",
        "charts.enable_zoom": "Activer le zoom",
        "charts.enable_zoom_help": "Faire défiler pour zoomer, faire glisser pour déplacer",
        "charts.enable_logy": "Échelle Y logarithmique",
        "charts.enable_logy_help": "Affecte uniquement le graphique 'PAR date'",
        "clear_audit": "Effacer l'audit",
        "cleared": "Effacé !",
        "col.amount": "Montant",
        "col.category": "Catégorie",
        "col.date": "Date",
        "col.id": "Id",
        "common": {
            "enter_category": "Entrez la catégorie : ",
            "enter_date": "Entrez la date (AAAA-MM-JJ) : ",
            "enter_option": "Choisissez une option : ",
            "saved": "Enregistré !",
            "saving_data": "Sauvegarde des données...",
            "suggestions": "Suggestions (3 derniers mois)",
        },
        "common.apply": "Appliquer",
        "common.description": "Description",
        "common.end": "Fin",
        "common.start": "Début",
        "common.submit": "Valider",
        "common.user": "Utilisateur",
        "csv_import_failed": "Échec de l'import CSV",
        "dashboard": {
            "recent_expenses": "Dépenses récentes",
            "summary_header": "=== Résumé des Dépenses ===",
            "summary_line": "Catégorie : {category}, Total : {total}",
            "total_expenses": "Dépenses totales : {total}",
        },
        "dashboard.by_category": "Par catégorie",
        "dashboard.last_operations": "Dernières opérations",
        "dashboard.placeholder": "Page de tableau de bord (espace réservé)",
        "download_csv": "Télécharger CSV",
        "download_json": "Télécharger JSON",
        "edit_limits": "Modifier les plafonds mensuels",
        "enter_amount": "Entrez le montant : ",
        "enter_category": "Entrez la catégorie : ",
        "enter_date": "Entrez la date (AAAA-MM-JJ) : ",
        "enter_description": "Entrez une description (optionnel) : ",
        "enter_month": "Entrez le mois (AAAA-MM) : ",
        "enter_option": "Choisissez une option : ",
        "errors": {
            "invalid_date": "Date invalide ! Utilisez AAAA-MM-JJ.",
            "warning_enter_name": "Veuillez entrer un nom.",
            "warning_enter_new_name": "Veuillez entrer un nouveau nom.",
            "warning_user_name_exists": "Un utilisateur avec ce nom existe déjà.",
        },
        "expense_added": "Dépense ajoutée avec succès !",
        "expense_summary": "Résumé des dépenses :",
        "filter_end_date": "Entrez la date de fin (AAAA-MM-JJ) : ",
        "filter_prompt": "Entrez la date de début et de fin (AAAA-MM-JJ à AAAA-MM-JJ) : ",
        "filter_results_header": "=== Dépenses Filtrées ===",
        "filter_start_date": "Entrez la date de début (AAAA-MM-JJ) : ",
        "goodbye": "Au revoir !",
        "import_export": "Importer / Exporter",
        "import_success": "Plafonds importés depuis le CSV",
        "info_no_data_to_export": "Aucune donnée à exporter.",
        "invalid_amount": "Montant invalide ! Veuillez entrer un nombre.",
        "invalid_category": "Catégorie invalide ! Veuillez réessayer.",
        "invalid_date": "Date invalide ! Utilisez AAAA-MM-JJ.",
        "invalid_option": "Option invalide ! Veuillez entrer un nombre de 1 à 8.",
        "kpi.average": "Moyenne",
        "kpi.categories": "Catégories",
        "kpi.operations": "Opérations",
        "kpi.total": "Total",
        "limit_line": "Catégorie : {category}, Limite : {limit}",
        "limits": {
            "set_limit_amount": "Entrez la limite mensuelle pour cette catégorie : ",
            "set_limit_category": "Entrez la catégorie pour définir/mettre à jour la limite "
            ": ",
        },
        "limits.clear_month": "Effacer les plafonds du mois",
        "limits.import_csv": "Importer des plafonds (CSV)",
        "limits.month": "Mois",
        "limits.monthly_title": "Limites mensuelles",
        "limits.title": "Limites budgétaires",
        "limits_header": "=== Limites Budgétaires ===",
        "menu": {
            "header": "=== Menu de l'Analyseur de Dépenses ===",
            "options": "1: Ajouter une dépense\n"
            "2: Voir le résumé\n"
            "3: Filtrer les dépenses par date\n"
            "4: Vérifier les limites budgétaires\n"
            "5: Définir ou mettre à jour les limites budgétaires\n"
            "6: Voir toutes les dépenses\n"
            "7: Sauvegarder et Quitter\n"
            "8: Générer des graphiques\n"
            "L: Changer de langue\n",
        },
        "menu.add_expense": "Ajouter une dépense",
        "menu.browse": "Parcourir & Filtrer",
        "menu.charts": "Graphiques",
        "menu.dashboard": "Tableau de bord",
        "menu.settings": "Paramètres",
        "menu.title": "Menu",
        "menu_header": "=== Menu de l'Analyseur de Dépenses ===",
        "menu_options": "1: Ajouter une dépense\n"
        "2: Voir le résumé\n"
        "3: Filtrer les dépenses par date\n"
        "4: Vérifier les limites budgétaires\n"
        "5: Définir ou mettre à jour les limites budgétaires\n"
        "6: Voir toutes les dépenses\n"
        "7: Sauvegarder et Quitter\n"
        "8: Générer des graphiques\n"
        "L: Changer de langue\n",
        "no_expenses": "Aucune dépense enregistrée.",
        "no_limits_set": "Aucune limite budgétaire n’a été définie.",
        "no_results": "Aucune dépense trouvée pour cette période.",
        "note": "Note : {note}",
        "profile.title": "Utilisateur / Profil",
        "profile": {
            "active_user": "Utilisateur actif",
            "create_rename_user": "Créer / renommer un utilisateur",
            "type_name": "Saisir le nom",
            "archive_before_delete": "Archiver avant de supprimer",
            "delete_user": "Supprimer l'utilisateur",
            "rename": "Renommer",
            "cannot_delete_last": "Vous ne pouvez pas supprimer le dernier utilisateur restant.",
            "deletion_failed": "Échec de la suppression.",
            "rename_failed": "Échec du renommage.",
            "toast_created_switched": "Créé et changé",
            "toast_deleted_switched": "Supprimé, changé",
            "toast_renamed_switched": "Renommé et changé",
            "toast_switched": "Changé",
        },
        "language_switched": "Langue changée",
        "prompt_budget_limit_for_category": "Entrez la limite budgétaire pour la catégorie :",
        "profile.active_user": "Utilisateur actif",
        "profile.create_rename_user": "Créer / renommer un utilisateur",
        "profile.type_name": "Saisir le nom",
        "profile.archive_before_delete": "Archiver avant de supprimer",
        "profile.delete_user": "Supprimer l'utilisateur",
        "profile.rename": "Renommer",
        "profile.cannot_delete_last": "Vous ne pouvez pas supprimer le dernier utilisateur restant.",
        "profile.deletion_failed": "Échec de la suppression.",
        "profile.rename_failed": "Échec du renommage.",
        "profile.toast_created_switched": "Créé et changé",
        "profile.toast_deleted_switched": "Supprimé, changé",
        "profile.toast_renamed_switched": "Renommé et changé",
        "profile.toast_switched": "Changé",
        "recent_expenses": "Dépenses récentes",
        "save_to_file": "Enregistrer dans un fichier",
        "saved": "Enregistré !",
        "saving_data": "Sauvegarde des données...",
        "set_limit_amount": "Entrez la limite mensuelle pour cette catégorie : ",
        "set_limit_category": "Entrez la catégorie pour définir/mettre à jour la limite : ",
        "settings.language": "Langue",
        "suggestions": "Suggestions (3 derniers mois)",
        "summary_header": "=== Résumé des Dépenses ===",
        "summary_line": "Catégorie : {category}, Total : {total}",
        "total_expenses": "Dépenses totales : {total}",
        "view_options.newest_first": "Les plus récentes en premier",
        "view_options.remove_dups": "Supprimer les doublons exacts",
        "warning_enter_name": "Veuillez entrer un nom.",
        "warning_enter_new_name": "Veuillez entrer un nouveau nom.",
        "warning_user_name_exists": "Un utilisateur avec ce nom existe déjà.",
    },
}

# --- aliases ---
ALIASES = {
    "limit_updated": "budget_limit_updated",
    # совместимость со старыми/жёсткими ключами:
    "Settings": "menu.settings",
    "settings": "menu.settings",
    # избавляемся от дубликатов между меню и заголовком страницы
    "add_expense.title": "menu.add_expense",
    "limit_updated": "budget_limit_updated",
    "browse.remove_dups": "view_options.remove_dups",
    "browse.newest_first": "view_options.newest_first",
    # унификация: legacy underscore → canonical dotted
    "browse.title": "menu.browse",
    "charts.title": "menu.charts",
    "tables.last_operations": "dashboard.last_operations",
    "charts.by_category": "dashboard.by_category",
}


def _resolve_alias(key: str) -> str:
    seen = set()
    cur = key
    while cur in ALIASES:
        if cur in seen:
            break
        seen.add(cur)
        cur = ALIASES[cur]
    return cur


def t(key: str, lang: str, default: Optional[str] = None) -> str:
    """Возвращает перевод ключа key для языка lang.
    Если ключ/перевод отсутствует или пуст, возвращает default (или сам key, если default=None).
    """
    # алиасы
    real_key = ALIASES.get(key, key)

    # словарь языка
    lang_dict = messages.get(lang, {})

    # извлекаем перевод
    val = lang_dict.get(real_key)
    if val is None or (isinstance(val, str) and val.strip() == ""):
        return default if default is not None else real_key
    return val
